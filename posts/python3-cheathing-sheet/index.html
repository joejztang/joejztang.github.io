<!doctype html><html lang=en><head><title>python3 cheathing sheet · 130l</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="130l"><meta name=description content="python3 is not compatible with lower version of python e.g. python2.x. Listed are some python basics and differences between python2 and python3."><meta name=keywords content="blog,science,technology,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="python3 cheathing sheet"><meta name=twitter:description content="python3 is not compatible with lower version of python e.g. python2.x. Listed are some python basics and differences between python2 and python3."><meta property="og:url" content="https://joejztang.github.io/posts/python3-cheathing-sheet/"><meta property="og:site_name" content="130l"><meta property="og:title" content="python3 cheathing sheet"><meta property="og:description" content="python3 is not compatible with lower version of python e.g. python2.x. Listed are some python basics and differences between python2 and python3."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-10-05T22:35:25+00:00"><meta property="article:modified_time" content="2017-10-05T22:35:25+00:00"><meta property="article:tag" content="Python3"><meta property="article:tag" content="Cheating Sheet"><link rel=canonical href=https://joejztang.github.io/posts/python3-cheathing-sheet/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/img/favicon.svg sizes=any><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://joejztang.github.io/>130l
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://joejztang.github.io/posts/python3-cheathing-sheet/>python3 cheathing sheet</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2017-10-05T22:35:25Z>October 5, 2017
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
8-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/python/>Python</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/python3/>Python3</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/cheating-sheet/>Cheating Sheet</a></span></div></div></header><div class=post-content><p>python3 is not compatible with lower version of python e.g. python2.x. Listed are some python basics and differences between python2 and python3.</p><p>来源自<a href=https://www.liaoxuefeng.com/ class=external-link target=_blank rel=noopener>廖雪峰大神的博客</a></p><h4 id=triple-quotes>Triple Quotes
<a class=heading-link href=#triple-quotes><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p>three single or double quotes. The syntax for triple quotes consists.</p><h4 id=none>None
<a class=heading-link href=#none><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><code>None</code> 和 0 是不同的. None 是一个特殊的空值, 而0是有意义的.</li></ul><h4 id=python-动态语言>python 动态语言
<a class=heading-link href=#python-%e5%8a%a8%e6%80%81%e8%af%ad%e8%a8%80><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>python 为动态语言, 变量本身类型不固定, 比如 a = 0,也可以给 a 赋值为 a = &lsquo;abc&rsquo;; 相对应的存在静态语言, 变量类型是固定的, 如 Java. 与静态语言相比, 动态语言更灵活.</li></ul><h4 id=return-none>return None
<a class=heading-link href=#return-none><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><code>def func()</code> 的返回值是由 <code>return</code> 决定的. 如果没有 <code>return</code> 语句, 返回 <code>None</code>. <code>return None</code> 可以简写为 <code>return</code>.</li></ul><h4 id=空函数>空函数
<a class=heading-link href=#%e7%a9%ba%e5%87%bd%e6%95%b0><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>空函数. 想定义一个什么事情也不做的函数, 可以用 <code>pass</code> 语句. 这种函数通常为了程序能跑起来, 先把函数名写上, 然后慢慢想.</li></ul><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>xxx</span>():
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>pass</span>
</span></span></code></pre></div><h4 id=返回多值函数>返回多值,函数
<a class=heading-link href=#%e8%bf%94%e5%9b%9e%e5%a4%9a%e5%80%bc%e5%87%bd%e6%95%b0><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>python 返回多个值的函数可以用 <code>tuple</code> 来实现.</li></ul><h4 id=python-允许给多个变量赋值>python 允许给多个变量赋值
<a class=heading-link href=#python-%e5%85%81%e8%ae%b8%e7%bb%99%e5%a4%9a%e4%b8%aa%e5%8f%98%e9%87%8f%e8%b5%8b%e5%80%bc><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p>Python允许你同时为多个变量赋值。例如：</p><pre tabindex=0><code>a = b = c = 1
</code></pre><p>以上实例，创建一个整型对象，值为1，三个变量被分配到相同的内存空间上。</p><p>您也可以为多个对象指定多个变量。例如：</p><pre tabindex=0><code>a, b, c = 1, 2, &#34;john&#34;
</code></pre><p>以上实例，两个整型对象1和2的分配给变量a和b，字符串对象"john"分配给变量c。</p><h4 id=参数类型>参数类型
<a class=heading-link href=#%e5%8f%82%e6%95%b0%e7%b1%bb%e5%9e%8b><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p><strong>参数</strong></p><ul><li><p>函数的默认参数. 如 <code>power(x, n=2)</code>. 设置默认参数时, 一, 默认参数必须在后, 否则会报错; 二, 默认参数必须指向不变对象, 如 str, None.</p></li><li><p><strong>可变参数</strong>(positional expansion, meaning unpacking arguments lists). 先看一下例子</p></li></ul><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>calc</span>(<span style=color:#ff7b72;font-weight:700>*</span>numbers):
</span></span><span style=display:flex><span>	sum <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>for</span> n <span style=color:#ff7b72;font-weight:700>in</span> numbers:
</span></span><span style=display:flex><span>		sum <span style=color:#ff7b72;font-weight:700>=</span> sum <span style=color:#ff7b72;font-weight:700>+</span> n <span style=color:#ff7b72;font-weight:700>*</span> n
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>return</span> sum
</span></span></code></pre></div><p>在函数内部, 参数 numbers 接收到一个 tuple, 所以调用改函数时, 可以传入任意个参数. 如</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>calc(<span style=color:#a5d6ff>1</span>, <span style=color:#a5d6ff>2</span>)
</span></span><span style=display:flex><span>calc()
</span></span></code></pre></div><p>函数会把接收到的参数先组成一个 tuple, 然后根据这个 tuple 进行运算.</p><p>如果我现在手上有一个 list 或者 tuple, 如 <code>nums = [1,2,3]</code>, 我怎么调用可变参数的函数呢?</p><p>calc(*nums) 即可解决.</p><p><code>*nums</code> 表示把 <code>nums</code>这个 list 所有元素作为可变参数传进去.</p><ul><li><strong>关键字参数</strong>(keyword expansion, meaning keyword arguments unpacking). 和可变参数的原理类似, 关键字参数会先把所接受的参数组装出一个 dict, 然后把 dict 传进去.</li></ul><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>person</span>(name, age, <span style=color:#ff7b72;font-weight:700>**</span>kw):
</span></span><span style=display:flex><span>	print(<span style=color:#a5d6ff>&#39;name: &#39;</span>, name, <span style=color:#a5d6ff>&#39;age: &#39;</span>, age, <span style=color:#a5d6ff>&#39;other: &#39;</span>, kw)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span>extra <span style=color:#ff7b72;font-weight:700>=</span> {<span style=color:#a5d6ff>&#39;city&#39;</span>: <span style=color:#a5d6ff>&#39;Beijing&#39;</span>}
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span>person(<span style=color:#a5d6ff>&#39;Bob&#39;</span>, <span style=color:#a5d6ff>35</span>, city <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;Beijing&#39;</span>)
</span></span><span style=display:flex><span>name: Bob age: <span style=color:#a5d6ff>35</span> other: {<span style=color:#a5d6ff>&#39;city&#39;</span>: <span style=color:#a5d6ff>&#39;Beijing&#39;</span>}
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span>person(<span style=color:#a5d6ff>&#39;Bob&#39;</span>, <span style=color:#a5d6ff>35</span>, <span style=color:#ff7b72;font-weight:700>**</span>extra)
</span></span><span style=display:flex><span>name: Bob age: <span style=color:#a5d6ff>35</span> other: {<span style=color:#a5d6ff>&#39;city&#39;</span>: <span style=color:#a5d6ff>&#39;Beijing&#39;</span>}
</span></span></code></pre></div><p><code>**extra</code>表示把 extra 这个 dict 所有 key-value 用关键字 **kw 传入. kw 将要获得一个 dict, 这个 dict 是 extra 的拷贝, 对 kw 的改动<strong>不会</strong>改变 extra.</p><ul><li><strong>命名关键字参数</strong>. 关键字参数调用者可以传入任意不受限制的参数, 然而命名关键字参数可以限制关键字参数的名字. 如</li></ul><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>person</span>(name, age, <span style=color:#ff7b72;font-weight:700>*</span>, city, job):
</span></span><span style=display:flex><span>	print (name, age, city, job)
</span></span></code></pre></div><p>命名关键字参数需要一个特殊分隔符<code>*</code>, <code>*</code>后面的参数被视为命名关键字参数.</p><p>注意: 如果函数中有可变参数在前面, 不需要<code>*</code>作为分隔符, 如:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>person</span>(name, age, <span style=color:#ff7b72;font-weight:700>*</span>args, city, job):
</span></span><span style=display:flex><span>	print(name, age, args, city, job)
</span></span></code></pre></div><p>还有如果使用命名关键字参数必须传入参数名, 否则会报错:</p><pre tabindex=0><code>&gt;&gt;&gt; person(&#39;Jack&#39;, 24, &#39;Beijing&#39;, &#39;Engineer&#39;)
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
TypeError: person() takes 2 positional arguments but 4 were given
</code></pre><ul><li><strong>参数组合</strong>. 在Python中定义函数，可以用必选参数、默认参数、可变参数、关键字参数和命名关键字参数，这5种参数都可以组合使用。但是请注意，参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数。</li></ul><p>对于任意函数，都可以通过类似 <code>func(*args, **kw)</code> 的形式调用它，无论它的参数是如何定义的</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>f1</span>(a, b, c<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>0</span>, <span style=color:#ff7b72;font-weight:700>*</span>args, <span style=color:#ff7b72;font-weight:700>**</span>kw):
</span></span><span style=display:flex><span>    print(<span style=color:#a5d6ff>&#39;a =&#39;</span>, a, <span style=color:#a5d6ff>&#39;b =&#39;</span>, b, <span style=color:#a5d6ff>&#39;c =&#39;</span>, c, <span style=color:#a5d6ff>&#39;args =&#39;</span>, args, <span style=color:#a5d6ff>&#39;kw =&#39;</span>, kw)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>f2</span>(a, b, c<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>0</span>, <span style=color:#ff7b72;font-weight:700>*</span>, d, <span style=color:#ff7b72;font-weight:700>**</span>kw):
</span></span><span style=display:flex><span>    print(<span style=color:#a5d6ff>&#39;a =&#39;</span>, a, <span style=color:#a5d6ff>&#39;b =&#39;</span>, b, <span style=color:#a5d6ff>&#39;c =&#39;</span>, c, <span style=color:#a5d6ff>&#39;d =&#39;</span>, d, <span style=color:#a5d6ff>&#39;kw =&#39;</span>, kw)
</span></span></code></pre></div><pre tabindex=0><code>&gt;&gt;&gt; args = (1, 2, 3, 4)
&gt;&gt;&gt; kw = {&#39;d&#39;: 99, &#39;x&#39;: &#39;#&#39;}
&gt;&gt;&gt; f1(*args, **kw)
a = 1 b = 2 c = 3 args = (4,) kw = {&#39;d&#39;: 99, &#39;x&#39;: &#39;#&#39;}
&gt;&gt;&gt; args = (1, 2, 3)
&gt;&gt;&gt; kw = {&#39;d&#39;: 88, &#39;x&#39;: &#39;#&#39;}
&gt;&gt;&gt; f2(*args, **kw)
a = 1 b = 2 c = 3 d = 88 kw = {&#39;x&#39;: &#39;#&#39;}
</code></pre><ul><li>小结</li></ul><p>Python的函数具有非常灵活的参数形态，既可以实现简单的调用，又可以传入非常复杂的参数。</p><p>默认参数一定要用不可变对象，如果是可变对象，程序运行时会有逻辑错误！</p><p>要注意定义可变参数和关键字参数的语法：</p><p>*args是可变参数，args接收的是一个tuple；</p><p>**kw是关键字参数，kw接收的是一个dict。</p><p>以及调用函数时如何传入可变参数和关键字参数的语法：</p><p>可变参数既可以直接传入：func(1, 2, 3)，又可以先组装list或tuple，再通过<em>args传入：func(</em>(1, 2, 3))；</p><p>关键字参数既可以直接传入：func(a=1, b=2)，又可以先组装dict，再通过<strong>kw传入：func(</strong>{&lsquo;a&rsquo;: 1, &lsquo;b&rsquo;: 2})。</p><p>使用*args和**kw是Python的习惯写法，当然也可以用其他参数名，但最好使用习惯用法。</p><p>命名的关键字参数是为了限制调用者可以传入的参数名，同时可以提供默认值。</p><p>定义命名的关键字参数在没有可变参数的情况下不要忘了写分隔符*，否则定义的将是位置参数。</p></li></ul><h4 id=generator-and-tuple>generator and tuple
<a class=heading-link href=#generator-and-tuple><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><strong>Python3 generator and tuple</strong>.</li></ul><p>They are different but look the same.</p><p>Tuple is like this, <code>t = (1, 2, 3)</code></p><p>Generator is like this, <code>g = (x *x for x in list)</code></p><p>Generator will not create the whole list, but will create one by one. Using <code>g.next()</code>, you will get next element.</p><h4 id=变量指向函数>变量指向函数
<a class=heading-link href=#%e5%8f%98%e9%87%8f%e6%8c%87%e5%90%91%e5%87%bd%e6%95%b0><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>变量可以指向函数</li></ul><p>如: <code>f = abs()</code></p><p>又如:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>add</span>(x, y, f):
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>return</span> f(x)<span style=color:#ff7b72;font-weight:700>+</span>f(y)
</span></span></code></pre></div><h4 id=内建函数>内建函数
<a class=heading-link href=#%e5%86%85%e5%bb%ba%e5%87%bd%e6%95%b0><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p>几大内建函数</p><ul><li><code>map</code> and <code>reduce</code></li></ul><p><code>map()</code> 函数接收两个参数，一个是函数，一个是<code>Iterable</code>，<code>map</code>将传入的函数依次作用到序列的每个元素，并把结果作为新的<code>Iterator</code>返回。</p><p><code>reduce</code>把一个函数作用在一个序列<code>[x1, x2, x3, ...]</code>上，这个函数必须接收两个参数，<code>reduce</code>把结果继续和序列的下一个元素做累积计算，其效果就是：</p><pre tabindex=0><code>reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)
</code></pre><ul><li><code>filter</code></li></ul><p><code>filter()</code>也接收一个函数和一个序列。和<code>map()</code>不同的是，<code>filter()</code>把传入的函数依次作用于每个元素，然后根据返回值是<code>True</code>还是<code>False</code>决定保留还是丢弃该元素。
<code>filter()</code>这个高阶函数，关键在于正确实现一个“筛选”函数。</p></li></ul><h4 id=闭包-closure>闭包 closure
<a class=heading-link href=#%e9%97%ad%e5%8c%85-closure><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>函数可以作为返回值, 闭包 closure</li></ul><p>函数中可以定义函数, 并且返回这个函数, 返回的结果类似于</p><pre tabindex=0><code>&gt;&gt;&gt; f = lazy_sum(1, 3, 5, 7, 9)
&gt;&gt;&gt; f
&lt;function lazy_sum.&lt;locals&gt;.sum at 0x101c6ed90&gt;
</code></pre><p>调用<code>f()</code>时, 才能得到求和结果.</p><p>注意到返回的函数在其定义内部引用了局部变量，所以，当一个函数返回了一个函数后，其内部的局部变量还被新函数引用</p><p>再有, 返回的函数并没有立刻执行，而是直到调用了f()才执行。</p><p>例子:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>count</span>():
</span></span><span style=display:flex><span>    fs <span style=color:#ff7b72;font-weight:700>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>for</span> i <span style=color:#ff7b72;font-weight:700>in</span> range(<span style=color:#a5d6ff>1</span>, <span style=color:#a5d6ff>4</span>):
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>f</span>():
</span></span><span style=display:flex><span>             <span style=color:#ff7b72>return</span> i<span style=color:#ff7b72;font-weight:700>*</span>i
</span></span><span style=display:flex><span>        fs<span style=color:#ff7b72;font-weight:700>.</span>append(f)
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> fs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f1, f2, f3 <span style=color:#ff7b72;font-weight:700>=</span> count()
</span></span></code></pre></div><p>在上面的例子中，每次循环，都创建了一个新的函数，然后，把创建的3个函数都返回了。</p><p>你可能认为调用<code>f1()</code>，<code>f2()</code>和<code>f3()</code>结果应该是<code>1</code>，<code>4</code>，<code>9</code>，但实际结果是：</p><pre tabindex=0><code>&gt;&gt;&gt; f1()
9
&gt;&gt;&gt; f2()
9
&gt;&gt;&gt; f3()
9
</code></pre><p>全部都是9！原因就在于返回的函数引用了变量i，<strong>但它并非立刻执行</strong>。等到3个函数都返回时，它们所引用的变量i已经变成了3，因此最终结果为9。</p><p>返回闭包时牢记的一点就是：<strong>返回函数不要引用任何循环变量，或者后续会发生变化的变量</strong>。</p><p>如果一定要引用循环变量怎么办？方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该循环变量后续如何更改，已绑定到函数参数的值不变：</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>count</span>():
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>f</span>(j):
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>g</span>():
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span> j<span style=color:#ff7b72;font-weight:700>*</span>j
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> g
</span></span><span style=display:flex><span>    fs <span style=color:#ff7b72;font-weight:700>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>for</span> i <span style=color:#ff7b72;font-weight:700>in</span> range(<span style=color:#a5d6ff>1</span>, <span style=color:#a5d6ff>4</span>):
</span></span><span style=display:flex><span>        fs<span style=color:#ff7b72;font-weight:700>.</span>append(f(i)) <span style=color:#8b949e;font-style:italic># f(i)立刻被执行，因此i的当前值被传入f(). 返回 f 返回的是函数, 不马上被执行; 返回 f(i)返回的是函数的值, 马上被执行 f 这个函数, 得出值.</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> fs
</span></span></code></pre></div><h4 id=lambda>lambda
<a class=heading-link href=#lambda><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>lambda 匿名函数</li></ul><p>匿名函数有个限制，就是只能有一个表达式，不用写return，返回值就是该表达式的结果。</p><pre tabindex=0><code>lambda x: x*x
</code></pre><h4 id=偏函数>偏函数
<a class=heading-link href=#%e5%81%8f%e5%87%bd%e6%95%b0><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>偏函数</li></ul><p>当函数的参数个数太多，需要简化时，使用<code>functools.partial</code>可以创建一个新的函数，这个新函数可以固定住原函数的部分参数，从而在调用时更简单。</p><h4 id=装饰器常见于-framework-如-flask-里面的route>装饰器(常见于 framework, 如 flask 里面的@route)
<a class=heading-link href=#%e8%a3%85%e9%a5%b0%e5%99%a8%e5%b8%b8%e8%a7%81%e4%ba%8e-framework-%e5%a6%82-flask-%e9%87%8c%e9%9d%a2%e7%9a%84route><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>装饰器 decorator</li></ul><p>装饰器其实就是一个闭包，把一个函数当做参数然后返回一个替代版函数. 以下是个例子:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>Coordinate</span>(object):
</span></span><span style=display:flex><span>     <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>__init__</span>(self, x, y):
</span></span><span style=display:flex><span>         self<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>=</span> x
</span></span><span style=display:flex><span>         self<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>=</span> y
</span></span><span style=display:flex><span>     <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>__repr__</span>(self):
</span></span><span style=display:flex><span>         <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#34;Coord: &#34;</span> <span style=color:#ff7b72;font-weight:700>+</span> str(self<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#79c0ff>__dict__</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>add</span>(a, b):
</span></span><span style=display:flex><span>     <span style=color:#ff7b72>return</span> Coordinate(a<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>+</span> b<span style=color:#ff7b72;font-weight:700>.</span>x, a<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>+</span> b<span style=color:#ff7b72;font-weight:700>.</span>y)
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>sub</span>(a, b):
</span></span><span style=display:flex><span>     <span style=color:#ff7b72>return</span> Coordinate(a<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>-</span> b<span style=color:#ff7b72;font-weight:700>.</span>x, a<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>-</span> b<span style=color:#ff7b72;font-weight:700>.</span>y)
</span></span><span style=display:flex><span>one <span style=color:#ff7b72;font-weight:700>=</span> Coordinate(<span style=color:#a5d6ff>100</span>, <span style=color:#a5d6ff>200</span>)
</span></span><span style=display:flex><span>two <span style=color:#ff7b72;font-weight:700>=</span> Coordinate(<span style=color:#a5d6ff>300</span>, <span style=color:#a5d6ff>200</span>)
</span></span><span style=display:flex><span>add(one, two)
</span></span><span style=display:flex><span>Coord: {<span style=color:#a5d6ff>&#39;y&#39;</span>: <span style=color:#a5d6ff>400</span>, <span style=color:#a5d6ff>&#39;x&#39;</span>: <span style=color:#a5d6ff>400</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>wrapper</span>(func):
</span></span><span style=display:flex><span>     <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>checker</span>(a, b): <span style=color:#8b949e;font-style:italic># 1</span>
</span></span><span style=display:flex><span>         <span style=color:#ff7b72>if</span> a<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>or</span> a<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>0</span>:
</span></span><span style=display:flex><span>             a <span style=color:#ff7b72;font-weight:700>=</span> Coordinate(a<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72>if</span> a<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72>else</span> <span style=color:#a5d6ff>0</span>, a<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72>if</span> a<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72>else</span> <span style=color:#a5d6ff>0</span>)
</span></span><span style=display:flex><span>         <span style=color:#ff7b72>if</span> b<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>or</span> b<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>0</span>:
</span></span><span style=display:flex><span>             b <span style=color:#ff7b72;font-weight:700>=</span> Coordinate(b<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72>if</span> b<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72>else</span> <span style=color:#a5d6ff>0</span>, b<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72>if</span> b<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72>else</span> <span style=color:#a5d6ff>0</span>)
</span></span><span style=display:flex><span>         ret <span style=color:#ff7b72;font-weight:700>=</span> func(a, b)
</span></span><span style=display:flex><span>         <span style=color:#ff7b72>if</span> ret<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>or</span> ret<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>0</span>:
</span></span><span style=display:flex><span>             ret <span style=color:#ff7b72;font-weight:700>=</span> Coordinate(ret<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72>if</span> ret<span style=color:#ff7b72;font-weight:700>.</span>x <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72>else</span> <span style=color:#a5d6ff>0</span>, ret<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72>if</span> ret<span style=color:#ff7b72;font-weight:700>.</span>y <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72>else</span> <span style=color:#a5d6ff>0</span>)
</span></span><span style=display:flex><span>         <span style=color:#ff7b72>return</span> ret
</span></span><span style=display:flex><span>     <span style=color:#ff7b72>return</span> checker
</span></span><span style=display:flex><span>add <span style=color:#ff7b72;font-weight:700>=</span> wrapper(add)
</span></span><span style=display:flex><span>sub <span style=color:#ff7b72;font-weight:700>=</span> wrapper(sub)
</span></span><span style=display:flex><span>sub(one, two)
</span></span><span style=display:flex><span>Coord: {<span style=color:#a5d6ff>&#39;y&#39;</span>: <span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>&#39;x&#39;</span>: <span style=color:#a5d6ff>0</span>}
</span></span><span style=display:flex><span>add(one, three)
</span></span><span style=display:flex><span>Coord: {<span style=color:#a5d6ff>&#39;y&#39;</span>: <span style=color:#a5d6ff>200</span>, <span style=color:#a5d6ff>&#39;x&#39;</span>: <span style=color:#a5d6ff>100</span>}
</span></span></code></pre></div><h4 id=_-and-__>_ and __
<a class=heading-link href=#_-and-__><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>_ and __</li></ul><p>表示定义的变量或者函数为 private. private 不应该被直接调用. 在 <code>class</code> 中, private 变量不可以被直接调用, 如 <code>__name</code>. 另一种和 private 变量长得很像的是 <code>__name__</code>, 这种是特殊变量, 特殊变量是可以被直接访问的, 所以不能用这种变量名.</p><p>最后注意下面的这种错误写法：</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart <span style=color:#ff7b72;font-weight:700>=</span> Student(<span style=color:#a5d6ff>&#39;Bart Simpson&#39;</span>, <span style=color:#a5d6ff>98</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart<span style=color:#ff7b72;font-weight:700>.</span>get_name()
</span></span><span style=display:flex><span><span style=color:#a5d6ff>&#39;Bart Simpson&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart<span style=color:#ff7b72;font-weight:700>.</span>__name <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;New Name&#39;</span> <span style=color:#8b949e;font-style:italic># 设置__name变量！</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart<span style=color:#ff7b72;font-weight:700>.</span>__name
</span></span><span style=display:flex><span><span style=color:#a5d6ff>&#39;New Name&#39;</span>
</span></span></code></pre></div><p>表面上看，外部代码“成功”地设置了<code>__name</code>变量，但实际上这个<code>__name</code>变量和<code>class</code>内部的<code>__name</code>变量不是一个变量！内部的<code>__name</code>变量已经被Python解释器自动改成了<code>_Student__name</code>，而外部代码给<code>bart</code>新增了一个<code>__name</code>变量。不信试试：</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart<span style=color:#ff7b72;font-weight:700>.</span>get_name() <span style=color:#8b949e;font-style:italic># get_name()内部返回self.__name</span>
</span></span><span style=display:flex><span><span style=color:#a5d6ff>&#39;Bart Simpson&#39;</span>
</span></span></code></pre></div><h4 id=__init__><code>__init__</code>
<a class=heading-link href=#__init__><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p><code>__init__</code>方法的第一个参数永远是<code>self</code>，表示创建的实例本身，因此，在<code>__init__</code>方法内部，就可以把各种属性绑定到<code>self</code>，因为<code>self</code>就指向创建的实例本身。</p></li><li><p>oop 任意绑定 attribute</p></li></ul><p>可以任意绑定数据, 对于两个实例变量, 虽然它们都是同一个类的不同实例，但拥有的变量名称都可能不同：</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart <span style=color:#ff7b72;font-weight:700>=</span> Student(<span style=color:#a5d6ff>&#39;Bart Simpson&#39;</span>, <span style=color:#a5d6ff>59</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> lisa <span style=color:#ff7b72;font-weight:700>=</span> Student(<span style=color:#a5d6ff>&#39;Lisa Simpson&#39;</span>, <span style=color:#a5d6ff>87</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart<span style=color:#ff7b72;font-weight:700>.</span>age <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>8</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> bart<span style=color:#ff7b72;font-weight:700>.</span>age
</span></span><span style=display:flex><span><span style=color:#a5d6ff>8</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> lisa<span style=color:#ff7b72;font-weight:700>.</span>age
</span></span><span style=display:flex><span>Traceback (most recent call last):
</span></span><span style=display:flex><span>  File <span style=color:#a5d6ff>&#34;&lt;stdin&gt;&#34;</span>, line <span style=color:#a5d6ff>1</span>, <span style=color:#ff7b72;font-weight:700>in</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>module<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f0883e;font-weight:700>AttributeError</span>: <span style=color:#a5d6ff>&#39;Student&#39;</span> object has no attribute <span style=color:#a5d6ff>&#39;age&#39;</span>
</span></span></code></pre></div><h4 id=polymophism>polymophism
<a class=heading-link href=#polymophism><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>Polymorphism 多态</li></ul><p>开闭原则: 调用方只管调用，不管细节.</p><p>对扩展开放：允许新增一个 class 的子类</p><p>对修改封闭：不需要修改依赖 class 类型的已经存在的函数。</p><p>继承可以把父类的所有功能都直接拿过来，这样就不必重零做起，子类只需要新增自己特有的方法，也可以把父类不适合的方法覆盖重写(override)(<code>override</code> is a type of function which occurs in a class which inherits from another class)。</p><p>动态语言的鸭子类型特点决定了继承不像静态语言那样是必须的。</p><ul><li>isinstance使用方法</li></ul><p>对于<code>class</code>的继承关系来说，使用<code>type()</code>就很不方便。我们要判断<code>class</code>的类型，可以使用<code>isinstance()</code>函数。</p><ul><li>dir()的使用</li></ul><p>如果要获得一个对象的所有属性和方法，可以使用<code>dir()</code>函数，它返回一个包含字符串的<code>list</code>，比如，获得一个str对象的所有属性和方法.</p><ul><li>MethodType</li></ul><p>给实例绑定方法</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>s<span style=color:#ff7b72;font-weight:700>.</span>set_age <span style=color:#ff7b72;font-weight:700>=</span> MethodType(set_age, s) <span style=color:#8b949e;font-style:italic># 给实例绑定一个方法</span>
</span></span></code></pre></div><p>只给这一个实例绑定方法, 对其他实例无效</p><ul><li>__slots__</li></ul><p>定义一个特殊的__slots__变量，来限制该class实例能添加的属性:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>Student</span>(object):
</span></span><span style=display:flex><span>    <span style=color:#79c0ff>__slots__</span> <span style=color:#ff7b72;font-weight:700>=</span> (<span style=color:#a5d6ff>&#39;name&#39;</span>, <span style=color:#a5d6ff>&#39;age&#39;</span>) <span style=color:#8b949e;font-style:italic># 用tuple定义允许绑定的属性名称</span>
</span></span></code></pre></div><p>如果硬绑定, 会得到<code>AttributeError</code>错误</p><h4 id=property>@property
<a class=heading-link href=#property><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><strong>@property</strong></li></ul><p>把&rsquo;@property&rsquo;加到一个函数上让这个函数变成属性函数时, 它会本身把这个函数变成只读(getter 方法), (如果此函数叫做 def fee), 那么另外可以设置一个 setter 函数,只是要加上&rsquo;@fee.setter&rsquo;</p><p>例如:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>Student</span>(object):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#d2a8ff;font-weight:700>@property</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>birth</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> self<span style=color:#ff7b72;font-weight:700>.</span>_birth
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#d2a8ff;font-weight:700>@birth.setter</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>birth</span>(self, value):
</span></span><span style=display:flex><span>        self<span style=color:#ff7b72;font-weight:700>.</span>_birth <span style=color:#ff7b72;font-weight:700>=</span> value
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#d2a8ff;font-weight:700>@property</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>age</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>2015</span> <span style=color:#ff7b72;font-weight:700>-</span> self<span style=color:#ff7b72;font-weight:700>.</span>_birth
</span></span></code></pre></div><p>以上 birth 是一个 getter, 第二个 birth 是一个 setter.</p><h4 id=mixin>mixin
<a class=heading-link href=#mixin><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p>MixIn 继承</p><p>如果让<code>Ostrich</code>除了继承<code>Bird</code> 外还继承<code>Runnable</code>, 那么就需要多重继承. 也叫做 MixIn 继承.</p><p>MixIn的目的就是给一个类增加多个功能，这样，在设计类的时候，我们优先考虑通过多重继承来组合多个MixIn的功能，而不是设计多层次的复杂的继承关系。</p></li></ul><h4 id=定制类>定制类
<a class=heading-link href=#%e5%ae%9a%e5%88%b6%e7%b1%bb><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p>定制类</p><ul><li>__str__() and __repr__()</li></ul><p>如果想要能够被打印出来, 就必须实现这个方法</p><p>如定义<code>Student</code>类</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>Student</span>(object):
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>     <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>__init__</span>(self, name):
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>         self<span style=color:#ff7b72;font-weight:700>.</span>name <span style=color:#ff7b72;font-weight:700>=</span> name
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>     <span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>__str__</span>(self):
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>         <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#39;Student object (name: </span><span style=color:#a5d6ff>%s</span><span style=color:#a5d6ff>)&#39;</span> <span style=color:#ff7b72;font-weight:700>%</span> self<span style=color:#ff7b72;font-weight:700>.</span>name
</span></span></code></pre></div><p>__str__() and __repr__()在大部分时间一样, 只是 str 打印字符串, 而 repr 打印程序调试字符串</p><ul><li>__iter__()</li></ul><p>想要被用于<code>for ... in</code>循环，类似<code>list</code>或<code>tuple</code>那样，就必须实现一个<code>__iter__()</code>方法</p><ul><li><p>__getitem__(), __setitem__() and __delitem__()</p></li><li><p>__call__()</p></li></ul><p>任何类，只需要定义一个__call__()方法，就可以直接对实例进行调用.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>Student</span>(object):
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>__init__</span>(self, name):
</span></span><span style=display:flex><span>    self<span style=color:#ff7b72;font-weight:700>.</span>name <span style=color:#ff7b72;font-weight:700>=</span> name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>__call__</span>(self):
</span></span><span style=display:flex><span>    print(<span style=color:#a5d6ff>&#39;My name is </span><span style=color:#a5d6ff>%s</span><span style=color:#a5d6ff>.&#39;</span> <span style=color:#ff7b72;font-weight:700>%</span> self<span style=color:#ff7b72;font-weight:700>.</span>name)
</span></span></code></pre></div><p>调用方法如下:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> s <span style=color:#ff7b72;font-weight:700>=</span> Student(<span style=color:#a5d6ff>&#39;Michael&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> s() <span style=color:#8b949e;font-style:italic># self参数不要传入</span>
</span></span><span style=display:flex><span>My name <span style=color:#ff7b72;font-weight:700>is</span> Michael<span style=color:#ff7b72;font-weight:700>.</span>
</span></span></code></pre></div></li><li><p>元类 metaclass</p><p>控制类的创建行为, 使用 metaclass; 运动时动态创建, 用 type();</p></li><li><p>logging</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>logging</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>logging<span style=color:#ff7b72;font-weight:700>.</span>exception(e)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>logging<span style=color:#ff7b72;font-weight:700>.</span>basicConfig(level <span style=color:#ff7b72;font-weight:700>=</span> logging<span style=color:#ff7b72;font-weight:700>.</span>INFO)
</span></span></code></pre></div><p>logging 有 debug, info, warning 和 error 等级别,这样可以指定不同级别的信息.</p></li></ul><h4 id=pdb-调试器>pdb, 调试器
<a class=heading-link href=#pdb-%e8%b0%83%e8%af%95%e5%99%a8><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p>pdb</p><p>python 的调试器 pdb, 让程序以单步方式运行, 可以随时查看运行状态</p><p>启动方式<code>python3 -m pdb err.py</code></p><p><code>n</code> 可以单步执行</p><p>任何时候都可以输入命令<code>p 变量名</code>来查看变量：</p><pre tabindex=0><code>(Pdb) p s
&#39;0&#39;
(Pdb) p n
0
</code></pre><p>输入命令<code>q</code>结束调试，退出程序.</p><p><strong>pdb.set_trace()</strong></p><p>这个方法也是用<code>pdb</code>，但是不需要单步执行，我们只需要<code>import pdb</code>，然后，在可能出错的地方放一个<code>pdb.set_trace()</code>，就可以设置一个断点</p><p><code>c</code>可以继续运行</p></li><li><p>Test-Driven Development(TDD)</p></li></ul><h4 id=with-关键字>with 关键字
<a class=heading-link href=#with-%e5%85%b3%e9%94%ae%e5%ad%97><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p><code>with</code> 的用法</p><p>有一些任务，可能事先需要设置，事后做清理工作。对于这种场景，Python的with语句提供了一种非常方便的处理方式。</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>with</span> controlled_execution() <span style=color:#ff7b72>as</span> thing:
</span></span><span style=display:flex><span>         some code
</span></span></code></pre></div><p>when &lsquo;with&rsquo; statement is executed, Python evaluates the expression, calls the <code>__enter__()</code> on the resulting value and assigns whatever <code>__enter__()</code> returns to the variable given by <code>as</code>. Python will <strong>then</strong> execute the code body, and no matter what happens in that code, call the guard object&rsquo;s <code>__exit__()</code></p><p><code>__exit__()</code> will look at the exceptions.</p><p><code>with</code> statement as a means of ensuring finalization of an object in the event of an exception being thrown. This usually looks like the following:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>with</span> open(<span style=color:#a5d6ff>&#34;x.txt&#34;</span>) <span style=color:#ff7b72>as</span> f:
</span></span><span style=display:flex><span>    data <span style=color:#ff7b72;font-weight:700>=</span> f<span style=color:#ff7b72;font-weight:700>.</span>read()
</span></span><span style=display:flex><span>    do something <span style=color:#ff7b72>with</span> data
</span></span></code></pre></div><p>上面的 code 是说, 打开 x.txt 文件, 并把这个返回的东西赋值给 f, 之后执行下面的 code.</p><p>有的 code 会省略 <code>as</code> 后面的代码, 但是通常只是<code>with...as...</code>的变体</p><p>如以下:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>test_keyerror</span>(self):
</span></span><span style=display:flex><span>        d <span style=color:#ff7b72;font-weight:700>=</span> Dict()
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>with</span> self<span style=color:#ff7b72;font-weight:700>.</span>assertRaises(<span style=color:#f0883e;font-weight:700>KeyError</span>):
</span></span><span style=display:flex><span>            value <span style=color:#ff7b72;font-weight:700>=</span> d[<span style=color:#a5d6ff>&#39;empty&#39;</span>]
</span></span></code></pre></div><p>这段代码 d 可以写在 as 后面, 但是得确定 d 是 dict().</p></li></ul><h4 id=读取文件写法>读取文件写法
<a class=heading-link href=#%e8%af%bb%e5%8f%96%e6%96%87%e4%bb%b6%e5%86%99%e6%b3%95><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p>读取文件</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>with</span> open(<span style=color:#a5d6ff>&#39;/path/to/file&#39;</span>, <span style=color:#a5d6ff>&#39;r&#39;</span>) <span style=color:#ff7b72>as</span> f:
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>for</span> line <span style=color:#ff7b72;font-weight:700>in</span> f<span style=color:#ff7b72;font-weight:700>.</span>readlines():
</span></span><span style=display:flex><span>    	print(line<span style=color:#ff7b72;font-weight:700>.</span>strip()) <span style=color:#8b949e;font-style:italic># 把末尾的&#39;\n&#39;删掉</span>
</span></span></code></pre></div><p>模式: r, rb, w, wb</p></li></ul><h4 id=python-获取路径>python 获取路径
<a class=heading-link href=#python-%e8%8e%b7%e5%8f%96%e8%b7%af%e5%be%84><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p>python 文件,系统相关</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>os</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>os<span style=color:#ff7b72;font-weight:700>.</span>environ
</span></span><span style=display:flex><span>os<span style=color:#ff7b72;font-weight:700>.</span>environ<span style=color:#ff7b72;font-weight:700>.</span>get(<span style=color:#a5d6ff>&#39;PATH&#39;</span>)
</span></span></code></pre></div><p>操作文件和目录的函数一部分放在<code>os</code>模块中，一部分放在<code>os.path</code>模块中，这一点要注意一下。查看、创建和删除目录可以这么调用：</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#8b949e;font-style:italic># 查看当前目录的绝对路径:</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> os<span style=color:#ff7b72;font-weight:700>.</span>path<span style=color:#ff7b72;font-weight:700>.</span>abspath(<span style=color:#a5d6ff>&#39;.&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a5d6ff>&#39;/Users/michael&#39;</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># 在某个目录下创建一个新目录，首先把新目录的完整路径表示出来:</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> os<span style=color:#ff7b72;font-weight:700>.</span>path<span style=color:#ff7b72;font-weight:700>.</span>join(<span style=color:#a5d6ff>&#39;/Users/michael&#39;</span>, <span style=color:#a5d6ff>&#39;testdir&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a5d6ff>&#39;/Users/michael/testdir&#39;</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># 然后创建一个目录:</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> os<span style=color:#ff7b72;font-weight:700>.</span>mkdir(<span style=color:#a5d6ff>&#39;/Users/michael/testdir&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># 删掉一个目录:</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> os<span style=color:#ff7b72;font-weight:700>.</span>rmdir(<span style=color:#a5d6ff>&#39;/Users/michael/testdir&#39;</span>)
</span></span></code></pre></div><p>但是复制文件的函数居然在os模块中不存在, <code>shutil</code>模块提供了<code>copyfile()</code>的函数</p></li><li><p>python print formatted</p><pre tabindex=0><code>&#34;Art: {a:5d},  Price: {p:8.2f}&#34;.format(a=453, p=59.058)
</code></pre></li></ul><h4 id=pickling-and-unpickling>pickling and unpickling
<a class=heading-link href=#pickling-and-unpickling><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><p>pickling unpickling 序列化 反序列化</p><p>我们把变量从内存中变成可存储或传输的过程称之为序列化，在Python中叫pickling，在其他语言中也被称之为serialization，marshalling，flattening等等，都是一个意思。</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#ff7b72>import</span> <span style=color:#ff7b72>pickle</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> d <span style=color:#ff7b72;font-weight:700>=</span> dict(name<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#39;Bob&#39;</span>, age<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>20</span>, score<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>88</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> pickle<span style=color:#ff7b72;font-weight:700>.</span>dumps(d)
</span></span><span style=display:flex><span><span style=color:#79c0ff>b</span><span style=color:#a5d6ff>&#39;</span><span style=color:#79c0ff>\x80\x03</span><span style=color:#a5d6ff>}q</span><span style=color:#79c0ff>\x00</span><span style=color:#a5d6ff>(X</span><span style=color:#79c0ff>\x03\x00\x00\x00</span><span style=color:#a5d6ff>ageq</span><span style=color:#79c0ff>\x01</span><span style=color:#a5d6ff>K</span><span style=color:#79c0ff>\x14</span><span style=color:#a5d6ff>X</span><span style=color:#79c0ff>\x05\x00\x00\x00</span><span style=color:#a5d6ff>scoreq</span><span style=color:#79c0ff>\x02</span><span style=color:#a5d6ff>KXX</span><span style=color:#79c0ff>\x04\x00\x00\x00</span><span style=color:#a5d6ff>nameq</span><span style=color:#79c0ff>\x03</span><span style=color:#a5d6ff>X</span><span style=color:#79c0ff>\x03\x00\x00\x00</span><span style=color:#a5d6ff>Bobq</span><span style=color:#79c0ff>\x04</span><span style=color:#a5d6ff>u.&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#pickling</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> f <span style=color:#ff7b72;font-weight:700>=</span> open(<span style=color:#a5d6ff>&#39;dump.txt&#39;</span>, <span style=color:#a5d6ff>&#39;wb&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> pickle<span style=color:#ff7b72;font-weight:700>.</span>dump(d, f)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> f<span style=color:#ff7b72;font-weight:700>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#unpickling</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> f <span style=color:#ff7b72;font-weight:700>=</span> open(<span style=color:#a5d6ff>&#39;dump.txt&#39;</span>, <span style=color:#a5d6ff>&#39;rb&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> d <span style=color:#ff7b72;font-weight:700>=</span> pickle<span style=color:#ff7b72;font-weight:700>.</span>load(f)
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> f<span style=color:#ff7b72;font-weight:700>.</span>close()
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> d
</span></span><span style=display:flex><span>{<span style=color:#a5d6ff>&#39;age&#39;</span>: <span style=color:#a5d6ff>20</span>, <span style=color:#a5d6ff>&#39;score&#39;</span>: <span style=color:#a5d6ff>88</span>, <span style=color:#a5d6ff>&#39;name&#39;</span>: <span style=color:#a5d6ff>&#39;Bob&#39;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#json pickling</span>
</span></span><span style=display:flex><span>print(json<span style=color:#ff7b72;font-weight:700>.</span>dumps(s, default<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#ff7b72>lambda</span> obj: obj<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#79c0ff>__dict__</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#json unpickling</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>dict2student</span>(d):
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> Student(d[<span style=color:#a5d6ff>&#39;name&#39;</span>], d[<span style=color:#a5d6ff>&#39;age&#39;</span>], d[<span style=color:#a5d6ff>&#39;score&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> json_str <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;{&#34;age&#34;: 20, &#34;score&#34;: 88, &#34;name&#34;: &#34;Bob&#34;}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&gt;&gt;&gt;</span> print(json<span style=color:#ff7b72;font-weight:700>.</span>loads(json_str, object_hook<span style=color:#ff7b72;font-weight:700>=</span>dict2student))
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>&lt;</span>__main__<span style=color:#ff7b72;font-weight:700>.</span>Student object at <span style=color:#a5d6ff>0x10cd3c190</span><span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span></code></pre></div></li><li><p>fork() 返回两个返回值的详细解释</p><p><strong>一段代码, if else 两个分支各代表父进程和子进程</strong></p><p>首先要明白的就是fork函数的作用，它是用来创建一个子进程，和父进程一样的子进程，就是父进程的一个副本。</p><p>子进程将会有自己的地址空间，并且会获得父进程的数据段的副本以及堆栈的副本，所获得的副本都是精确拷贝。所谓副本就是一模一样的，包括变量，堆栈的结构。</p><p>另外有一点就是子进程和父进程共享代码段。</p><p>fork函数如何返回两次值那？这就要说到子进程的创建了。</p><p>其实现过程大概是这样：</p><p>首先在父进程中调用fork函数，在fork函数中开始的代码中首先创建一个子进程空间，获得一个进程ID，然后逐步将数据段以及堆栈都拷贝过去，因为子进程的数据段以及堆栈都和父进程一样，而且创建完成后就会和父进程共享代码段，共同执行代码，所以fork创建完子进程后面的代码在子进程中也会执行，并且堆栈中也有fork函数等待返回，这样就可以在fork下面的代码中进行实现返回值了，<strong>在父进程中执行的时候就可以判断当前进程的PID，如果等于刚刚新建进程的PID则返回0</strong>，但是因为当前进程为父进程所以它的PID不会等于刚刚新建进程的PID，再往下执行如果不等于则返回刚刚新建进程的PID，这样父进程得到的fork返回值就是新建子进程的PID。而在子进程中同样会执行fork剩下的代码，也会判断当前进程的PID是否等于刚刚新建进程的PID，结果是等于的，因为是在子进程中，其本身就是刚刚新建的进程，所以既然等于则会返回0，这样子进程中得到的返回值就是0，然后下面的代码段在父进程和子进程中执行时就可以根据返回值的不同而执行不同的代码了。
其实在linux中fork返回值的处理交给了一个do_fork的函数，这个函数根据传入的值，然后会分别在子进程和父进程中执行，从而返回两次不同的值，具体过程和上面所说的实现思想差不多。</p></li><li><p>doctest 文档测试</p><p>当在</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#a5d6ff>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>&#39;&#39;&#39;</span>
</span></span></code></pre></div><p>中写入代码, 可以自动执行写在注释中的这些代码. doctest模块可以直接提取注释中的代码并执行测试</p><p>eg</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>if</span> <span style=color:#79c0ff>__name__</span><span style=color:#ff7b72;font-weight:700>==</span><span style=color:#a5d6ff>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>import</span> <span style=color:#ff7b72>doctest</span>
</span></span><span style=display:flex><span>    doctest<span style=color:#ff7b72;font-weight:700>.</span>testmod()
</span></span></code></pre></div></li></ul></div><footer></footer></article></section></div><footer class=footer><section class=container>©
1990 -
2025
130l
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>