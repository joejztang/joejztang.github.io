<!doctype html><html lang=en><head><title>react-redux 重要概念 · 130l</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="130l"><meta name=description content="
  flux 和 redux
  
    
    Link to heading
  

说到 react-redux 就绕不开 flux 和 redux 模式. 他们有很多相同, 也有不同. 现在我们来回顾一下什么是 flux, 什么是 redux.

  flux
  
    
    Link to heading
  


可以看到 flux 的精髓即数据永远单向流动.

  Redux
  
    
    Link to heading
  

redux 借鉴了很多 flux 里的概念, 只是略有不同. redux 也是一种模式的设计.

  
      
          Flux
          Redux
      
  
  
      
          多个 store
          一个 store
      
      
          dispatcher对 store 进行修改
          没有 dispatcher这个概念. 它使用 reducer 进行事件的处理. reducer 是纯函数.
      
  

看完了 flux 和 redux, 大概有个数, 就是大概这棵组件树就应该像下面这么画了."><meta name=keywords content="blog,science,technology,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="react-redux 重要概念"><meta name=twitter:description content="flux 和 redux Link to heading 说到 react-redux 就绕不开 flux 和 redux 模式. 他们有很多相同, 也有不同. 现在我们来回顾一下什么是 flux, 什么是 redux.
flux Link to heading 可以看到 flux 的精髓即数据永远单向流动.
Redux Link to heading redux 借鉴了很多 flux 里的概念, 只是略有不同. redux 也是一种模式的设计.
Flux Redux 多个 store 一个 store dispatcher对 store 进行修改 没有 dispatcher这个概念. 它使用 reducer 进行事件的处理. reducer 是纯函数. 看完了 flux 和 redux, 大概有个数, 就是大概这棵组件树就应该像下面这么画了."><meta property="og:url" content="http://www.example.com/posts/react-redux-%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5/"><meta property="og:site_name" content="130l"><meta property="og:title" content="react-redux 重要概念"><meta property="og:description" content="flux 和 redux Link to heading 说到 react-redux 就绕不开 flux 和 redux 模式. 他们有很多相同, 也有不同. 现在我们来回顾一下什么是 flux, 什么是 redux.
flux Link to heading 可以看到 flux 的精髓即数据永远单向流动.
Redux Link to heading redux 借鉴了很多 flux 里的概念, 只是略有不同. redux 也是一种模式的设计.
Flux Redux 多个 store 一个 store dispatcher对 store 进行修改 没有 dispatcher这个概念. 它使用 reducer 进行事件的处理. reducer 是纯函数. 看完了 flux 和 redux, 大概有个数, 就是大概这棵组件树就应该像下面这么画了."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-09-07T14:18:38+00:00"><meta property="article:modified_time" content="2018-09-07T14:18:38+00:00"><meta property="article:tag" content="React-Redux"><link rel=canonical href=http://www.example.com/posts/react-redux-%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/img/favicon.svg sizes=any><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=http://www.example.com/>130l
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=http://www.example.com/posts/react-redux-%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5/>react-redux 重要概念</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2018-09-07T14:18:38Z>September 7, 2018
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
2-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/javascript/>Javascript</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/react-redux/>React-Redux</a></span></div></div></header><div class=post-content><h1 id=flux-和-redux>flux 和 redux
<a class=heading-link href=#flux-%e5%92%8c-redux><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>说到 react-redux 就绕不开 flux 和 redux 模式. 他们有很多相同, 也有不同. 现在我们来回顾一下什么是 flux, 什么是 redux.</p><h2 id=flux>flux
<a class=heading-link href=#flux><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><img src=/images/flux.png alt=flux></p><p>可以看到 flux 的精髓即数据永远单向流动.</p><h2 id=redux>Redux
<a class=heading-link href=#redux><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>redux 借鉴了很多 flux 里的概念, 只是略有不同. redux 也是一种模式的设计.</p><table><thead><tr><th>Flux</th><th>Redux</th></tr></thead><tbody><tr><td>多个 store</td><td>一个 store</td></tr><tr><td>dispatcher对 store 进行修改</td><td>没有 dispatcher这个概念. 它使用 reducer 进行事件的处理. reducer 是纯函数.</td></tr></tbody></table><p>看完了 flux 和 redux, 大概有个数, 就是大概这棵组件树就应该像下面这么画了.</p><p><img src=/images/reduxStore.png alt="redux store"></p><h1 id=react-redux-之-createstore>react-redux 之 createStore
<a class=heading-link href=#react-redux-%e4%b9%8b-createstore><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>我们说过 redux 只有一个 store, 呐, 这个就是创建这个 store 的 func 了.</p><p>在这之前, 我们需要明确 context 是什么, 我们先叉出来讲讲 context.</p><h2 id=context>context
<a class=heading-link href=#context><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>context 是个 reactjs 的概念.</p><blockquote><p>React.js 的 context 就是这么一个东西，某个组件只要往自己的 context 里面放了某些状态，这个组件之下的 <strong>所有子组件</strong> 都直接访问这个状态而不需要通过中间组件的传递。一个组件的 context 只有它的子组件能够访问，它的父组件是不能访问到的，你可以理解每个组件的 context 就是瀑布的源头，<strong>只能往下流不能往上飞</strong>。</p></blockquote><p>btw, reactjs 在某个版本之后出了一个新的 context api, 还没有时间看, 据说可以在简单情况下取代 redux. 这个以后再说.</p><p><strong>总的来说, 就我个人理解, context 就是把当前子节点的状态拿到一个地方, 这个子节点的孩子节点都可以访问这个状态, 避免了子节点一层一层往下传递 props</strong></p><p>这样看起来没什么问题, 很好啊, 方便. 但是, context 打破了数据单向流动的规律, 增加了组件之间的耦合.</p><hr><p>说完了 context, 我们回头来接着说这个 createStore.</p><p>context 对于所有孩子节点都是可见的, 也就是说谁都可以修改, 那么它就很危险了. 那可怎么办? 我们就需要一个东西专门处理修改 context 的这个行为, 这个东西就是 reducer. 实际上 reducer 可能就是一个函数.</p><p>reducer 在加上 state 就构成了 store 的主要结构. 也就是说代码上 store 不光存储 context, 它也管发起的 action. 但是模式上我们还是要把 store 和 reducer 分开. <strong>但是我们是没有办法通过 store 来和 components 进行互动的, 如果有的话, 那就和 context 的本质没有差别了</strong>.</p><h1 id=react-redux-之-provider>react-redux 之 Provider
<a class=heading-link href=#react-redux-%e4%b9%8b-provider><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><blockquote><p>If we want to link our React application with the redux store, we first have to let our app know that this store exists. &mldr; <strong>It serves just one purpose : to “provide” the store to its child components</strong>.</p></blockquote><p>provider 的作用就是喂数据的 <strong>节点</strong>.</p><p>有了数据源头, 有了 component, 我们就需要他们互动起来, 于是就需要下面这些</p><h1 id=connect--mapstatetoprops--mapdispatchtoprops>connect & mapStateToProps & mapDispatchToProps
<a class=heading-link href=#connect--mapstatetoprops--mapdispatchtoprops><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>connect 是个高阶的component. 它的作用是 <strong>消除大量重复逻辑</strong> 和 <strong>消除耦合</strong>.</p><p>说到high order component, 它又叫做pure/dumb component, 和 pure function 一样, 不产生副作用, 结果可以预测.</p><blockquote><p>connect 就是把 Dumb 组件和 context 连接（connect）起来了
which uses connect to map the stores state and dispatch to the props of a component</p></blockquote><p>dumb 组件对应 a component, context 对应 state and dispatch.</p><p>下面的图也许可以肤浅的解释一下 connect 的作用.</p><pre tabindex=0><code>  mapStateToProps, mapDispatchToProps -&gt; connect &lt;- one of components
</code></pre><p>注意, connect 只能连接 provider 下面的 components.</p><h1 id=credit-to>credit to
<a class=heading-link href=#credit-to><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><ul><li><a href=https://medium.com/@nightspirit622/%E8%A9%B2%E4%B8%8D%E8%A9%B2%E7%94%A8context-api-%E4%BE%86%E5%8F%96%E4%BB%A3-redux-4d7395d5c8da class=external-link target=_blank rel=noopener>该不该用 context-api 来取代 redux</a></li><li><a href=https://www.sohamkamani.com/blog/2017/03/31/react-redux-connect-explained/ class=external-link target=_blank rel=noopener>react-redux-connect-explained</a></li><li><a href=http://huziketang.mangojuice.top/books/react/lesson37 class=external-link target=_blank rel=noopener>react.js 小书</a></li><li><a href=http://huziketang.mangojuice.top/books/react/lesson29 class=external-link target=_blank rel=noopener>react.js 小书</a></li></ul></div><footer></footer></article></section></div><footer class=footer><section class=container>©
1990 -
2025
130l
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>