<!doctype html><html lang=en><head><title>scrapy recipe · 130l</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="130l"><meta name=description content='
  basic command
  
    
    Link to heading
  


  create a project
  
    
    Link to heading
  

scrapy startproject <project_name>
cd <project_name>
scrapy genspider <spider_name> <url>
for url, remove www. or it will creates error.

  list all spiders
  
    
    Link to heading
  

scrapy list

  start shell
  
    
    Link to heading
  

scrapy shell

  scrapy argument
  
    
    Link to heading
  

scrapy crawl <spider name> -a <argument name: "argument content">'><meta name=keywords content="blog,science,technology,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="scrapy recipe"><meta name=twitter:description content='basic command Link to heading create a project Link to heading scrapy startproject <project_name>
cd <project_name>
scrapy genspider <spider_name> <url>
for url, remove www. or it will creates error.
list all spiders Link to heading scrapy list
start shell Link to heading scrapy shell
scrapy argument Link to heading scrapy crawl <spider name> -a <argument name: "argument content">'><meta property="og:url" content="https://joejztang.github.io/posts/scrapy/"><meta property="og:site_name" content="130l"><meta property="og:title" content="scrapy recipe"><meta property="og:description" content='basic command Link to heading create a project Link to heading scrapy startproject <project_name>
cd <project_name>
scrapy genspider <spider_name> <url>
for url, remove www. or it will creates error.
list all spiders Link to heading scrapy list
start shell Link to heading scrapy shell
scrapy argument Link to heading scrapy crawl <spider name> -a <argument name: "argument content">'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-07-03T16:39:39+00:00"><meta property="article:modified_time" content="2018-07-03T16:39:39+00:00"><link rel=canonical href=https://joejztang.github.io/posts/scrapy/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/img/favicon.svg sizes=any><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://joejztang.github.io/>130l
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://joejztang.github.io/posts/scrapy/>scrapy recipe</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2018-07-03T16:39:39Z>July 3, 2018
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
2-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/scrapy/>Scrapy</a></div></div></header><div class=post-content><h1 id=basic-command>basic command
<a class=heading-link href=#basic-command><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><h2 id=create-a-project>create a project
<a class=heading-link href=#create-a-project><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><code>scrapy startproject &lt;project_name></code></p><p><code>cd &lt;project_name></code></p><p><code>scrapy genspider &lt;spider_name> &lt;url></code></p><p>for <code>url</code>, remove <code>www.</code> or it will creates error.</p><h2 id=list-all-spiders>list all spiders
<a class=heading-link href=#list-all-spiders><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><code>scrapy list</code></p><h2 id=start-shell>start shell
<a class=heading-link href=#start-shell><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><code>scrapy shell</code></p><h2 id=scrapy-argument>scrapy argument
<a class=heading-link href=#scrapy-argument><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><code>scrapy crawl &lt;spider name> -a &lt;argument name: "argument content"></code></p><h2 id=def-close-and-csv-management>def close() and csv management
<a class=heading-link href=#def-close-and-csv-management><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>calculate most recent generated csv: <code>csv_file = max(glob.iglob("*.csv"), key=os.path.getctime)</code></p><p>transfer csv to xslx using <code>openpyxl</code></p><h1 id=scrapy-architecture>scrapy architecture
<a class=heading-link href=#scrapy-architecture><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><ul><li><code>scrapy.cfg</code></li><li><code>xxx.py</code>: spider itself</li><li><code>pipelines.py</code>: continue or drop logic here</li><li><code>settings.py</code></li><li></li></ul><h1 id=basic-syntax>basic syntax
<a class=heading-link href=#basic-syntax><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>sometimes, <code>&lt;selector></code> is replaced by <code>response</code></p><ul><li>tag selector: <code>&lt;selctor>.xpath('//h1/a/text()')</code></li><li>select just text from <code>xpath</code>: <code>&lt;selctor>.xpath('//h1/a/text()').extract()</code></li><li>class selector: <code>&lt;selctor>.xpath('//*[@class="xxx"]')</code></li><li>contains: <code>&lt;selector>.xpath(//*[contains(@class, "xxxx")]/@class)</code></li><li>following-siblings: <code>&lt;selector>.xpath(//*[@id="xxx"]/following-siblings::p/...)</code></li></ul><h1 id=differences-between-----and->differences between <code>/, //, *, @ and .</code>
<a class=heading-link href=#differences-between-----and-><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><ul><li><code>/</code>: separating directly subsequent tags</li><li><code>//</code>: separating indirectly subsequent tags<ul><li>When we use <code>//</code> at the very beginning of the XPath expression, it means from the <code>&lt;html></code> tag until the tag following it. So <code>//a</code> refers to the first <code>&lt;a></code> tag after <code>&lt;html></code></li><li>When we use <code>//</code> in the middle of the XPath expression, it means &ldquo;whatever tags in between&rdquo;. So <code>//p//a</code> refers to the <code>&lt;a></code> tag that is indirectly inside the first <code>&lt;p></code> tag, which means there might be another parent tag like <code>&lt;span></code> or whatever, including this <code>&lt;a></code> tag. However, <code>//p/a</code> refers to the <code>&lt;a></code> that is directly inside the <code>&lt;p></code> tag.</li></ul></li><li><code>*</code>: here refers to any tag that obey the rule in <code>[]</code></li><li><code>@</code>: It refers to attributes that defined.</li><li><code>.</code>: You use the dot when you are extracting from the wrapper selector not from the response.</li></ul><h1 id=methods-to-get-xpath>methods to get xpath
<a class=heading-link href=#methods-to-get-xpath><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><ol><li>google chrome <code>copy->copy xpath</code></li><li>firefox <code>copy->copy xpath</code></li><li>xpath helper (chrome extension)</li><li>xpath tester</li></ol><h1 id=scrapy-vs-selenium>scrapy vs selenium
<a class=heading-link href=#scrapy-vs-selenium><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>scrapy is faster than selenium in scrape</p><p>however, selenium is for testing.</p><h1 id=credits-to>credits to:
<a class=heading-link href=#credits-to><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><ul><li><a href=https://www.udemy.com/scrapy-tutorial-web-scraping-with-python/learn/v4/questions/2264866 class=external-link target=_blank rel=noopener>useful link 1</a></li><li></li></ul></div><footer></footer></article></section></div><footer class=footer><section class=container>©
1990 -
2025
130l
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>