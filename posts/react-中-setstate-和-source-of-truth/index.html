<!doctype html><html lang=en><head><title>react 中 setState() 和 source of truth · 130l</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="130l"><meta name=description content="
  setState()
  
    
    Link to heading
  

setState() 接受对象作为参数. 只要调用 setState(), 组件就会重新渲染. 但是当调用 setState()的时候, reactjs 并不会马上修改 state. reactjs 会把修改放到一个更新队列里面, 稍后才会从队列中把新的状态提取出来合并到 state 中, 然后再触发组件更新.
还有就是 setState() 只能在已经挂载或者正在挂载的组件上调用.

我们一般会把组件的 state 的初始化工作放在 constructor 里面去做；在 componentWillMount 进行组件的启动工作，例如 Ajax 数据拉取、定时器的启动；组件从页面上销毁的时候，有时候需要一些数据的清理，例如定时器的清理，就会放在 componentWillUnmount 里面去做。

  为什么有 setState()?
  
    
    Link to heading
  

html form 和 react 中的 dom 元素不太一样. html 中 form maintain their own state and update it based on user input. 但是在 reactjs 中, state is typically kept in the state property of components, 所以需要用 setState() 来 update."><meta name=keywords content="blog,science,technology,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="react 中 setState() 和 source of truth"><meta name=twitter:description content="setState() Link to heading setState() 接受对象作为参数. 只要调用 setState(), 组件就会重新渲染. 但是当调用 setState()的时候, reactjs 并不会马上修改 state. reactjs 会把修改放到一个更新队列里面, 稍后才会从队列中把新的状态提取出来合并到 state 中, 然后再触发组件更新.
还有就是 setState() 只能在已经挂载或者正在挂载的组件上调用.
我们一般会把组件的 state 的初始化工作放在 constructor 里面去做；在 componentWillMount 进行组件的启动工作，例如 Ajax 数据拉取、定时器的启动；组件从页面上销毁的时候，有时候需要一些数据的清理，例如定时器的清理，就会放在 componentWillUnmount 里面去做。
为什么有 setState()? Link to heading html form 和 react 中的 dom 元素不太一样. html 中 form maintain their own state and update it based on user input. 但是在 reactjs 中, state is typically kept in the state property of components, 所以需要用 setState() 来 update."><meta property="og:url" content="https://joejztang.github.io/posts/react-%E4%B8%AD-setstate-%E5%92%8C-source-of-truth/"><meta property="og:site_name" content="130l"><meta property="og:title" content="react 中 setState() 和 source of truth"><meta property="og:description" content="setState() Link to heading setState() 接受对象作为参数. 只要调用 setState(), 组件就会重新渲染. 但是当调用 setState()的时候, reactjs 并不会马上修改 state. reactjs 会把修改放到一个更新队列里面, 稍后才会从队列中把新的状态提取出来合并到 state 中, 然后再触发组件更新.
还有就是 setState() 只能在已经挂载或者正在挂载的组件上调用.
我们一般会把组件的 state 的初始化工作放在 constructor 里面去做；在 componentWillMount 进行组件的启动工作，例如 Ajax 数据拉取、定时器的启动；组件从页面上销毁的时候，有时候需要一些数据的清理，例如定时器的清理，就会放在 componentWillUnmount 里面去做。
为什么有 setState()? Link to heading html form 和 react 中的 dom 元素不太一样. html 中 form maintain their own state and update it based on user input. 但是在 reactjs 中, state is typically kept in the state property of components, 所以需要用 setState() 来 update."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-08-24T16:54:53+00:00"><meta property="article:modified_time" content="2018-08-24T16:54:53+00:00"><meta property="article:tag" content="Javascript"><link rel=canonical href=https://joejztang.github.io/posts/react-%E4%B8%AD-setstate-%E5%92%8C-source-of-truth/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/img/favicon.svg sizes=any><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://joejztang.github.io/>130l
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://joejztang.github.io/posts/react-%E4%B8%AD-setstate-%E5%92%8C-source-of-truth/>react 中 setState() 和 source of truth</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2018-08-24T16:54:53Z>August 24, 2018
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
One-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/reactjs/>Reactjs</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/javascript/>Javascript</a></span></div></div></header><div class=post-content><h1 id=setstate><code>setState()</code>
<a class=heading-link href=#setstate><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p><code>setState()</code> 接受对象作为参数. 只要调用 <code>setState()</code>, 组件就会重新渲染. 但是当调用 <code>setState()</code>的时候, <strong>reactjs 并不会马上修改 state</strong>. reactjs 会把修改放到一个更新队列里面, 稍后才会从队列中把新的状态提取出来合并到 state 中, 然后再触发组件更新.</p><p>还有就是 <code>setState()</code> 只能在已经挂载或者正在挂载的组件上调用.</p><blockquote><p>我们一般会把组件的 <code>state</code> 的初始化工作放在 <code>constructor</code> 里面去做；在 <code>componentWillMount</code> 进行组件的启动工作，例如 <code>Ajax</code> 数据拉取、定时器的启动；组件从页面上销毁的时候，有时候需要一些数据的清理，例如定时器的清理，就会放在 <code>componentWillUnmount</code> 里面去做。</p></blockquote><h1 id=为什么有-setstate>为什么有 <code>setState()</code>?
<a class=heading-link href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e6%9c%89-setstate><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>html form 和 react 中的 dom 元素不太一样. html 中 form <strong>maintain their own state and update it based on user input</strong>. 但是在 reactjs 中, <strong>state is typically kept in the state property of components</strong>, 所以需要用 <code>setState()</code> 来 update.</p><p>通过把 state 保持在 component 中, react 成功的做到了 state 只和 component 中的 state 有关, 即 &lsquo;single source of truth&rsquo;.</p><h1 id=credit-to>credit to
<a class=heading-link href=#credit-to><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><ul><li><a href=http://huziketang.mangojuice.top/books/react/lesson19 class=external-link target=_blank rel=noopener>挂载阶段的组件生命周期</a></li></ul></div><footer></footer></article></section></div><footer class=footer><section class=container>©
1990 -
2025
130l
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>